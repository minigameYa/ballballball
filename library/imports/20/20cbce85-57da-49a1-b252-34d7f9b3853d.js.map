{"version":3,"sources":["../../../../assets/Script/assets/Script/Game.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["const { ccclass, property } = cc._decorator;\nimport { user } from './modules/data'\nimport { ballScale, ballDerection } from \"./modules/data\"\n\ninterface ballInfo{\n    HP: number,\n    derection: number\n}\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    @property(cc.Prefab)\n    ballPrefab: cc.Prefab = null;\n\n    @property(cc.Node)\n    car: cc.Node = null\n\n    @property(cc.Node)\n    ground: cc.Node = null\n\n    @property\n    balls: ballInfo[] = []\n    gameTime: number = 0\n    carY: number = 0\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        this.carY = this.car.y + this.car.height / 2\n        this.spawnNewBall()\n    }\n\n    start() {\n\n    }\n\n    spawnNewBall() {\n        this.initNewBall()\n    }\n\n    initNewBall() {\n        let ballCount = this.balls.length\n        const ball = cc.instantiate(this.ballPrefab)\n        // 获取前二次的hp\n        let lastHP = ballCount <= 2 ? 0 : this.balls[ballCount - 3].HP\n        // 计算本次最大hp\n        let HPMax = user.bullet.power * user.bullet.speed * (1 + 0.5)\n        // 根据时间增长得出一个hp\n        let HPCur = 10 + this.gameTime / 120 * 1000 * HPMax\n        // 最终hp在前二次于本次之间选择\n        let HP = Math.floor(cc.random0To1() * (HPCur - lastHP) + lastHP)\n        // 随机方向\n        let dRandom = cc.random0To1() > 0.5 ? ballDerection.Left : ballDerection.Right\n        // 记录本次球信息\n        this.balls.push({\n            HP: HP,\n            derection: dRandom\n        })\n        // 随机ball的体积 并计算高度\n        let scale\n        let scaleRandom = cc.random0To1()\n        let x:number,y:number\n        if (scaleRandom < 0.333333) {\n            scale = ballScale.NORMAL\n            y = (this.node.height / 2 - this.carY) / 3 + this.carY - ball.height * scale / 2\n        }\n        if (scaleRandom >= 0.333333 && scaleRandom <= 0.666666) {\n            scale = ballScale.BIG\n            y = (this.node.height / 2 - this.carY) / 3 * 2 + this.carY - ball.height * scale / 2\n        }\n        if (scaleRandom > 0.666666) {\n            scale = ballScale.BIGBIG\n            y = (this.node.height / 2 - this.carY) + this.carY - ball.height * scale / 2\n        }\n        x = dRandom == ballDerection.Left ? this.node.width / 2 : -this.node.width / 2\n        let Ball = ball.getComponent('Ball')\n        Ball.num = HP\n        Ball.scale = scale\n        Ball.maxY = y\n        Ball.game = this\n        Ball.derection = dRandom\n        ball.setPosition(cc.p(x, y))\n        this.node.addChild(ball)\n    }\n    update(dt) {\n        this.gameTime += dt\n    }\n}\n"]}