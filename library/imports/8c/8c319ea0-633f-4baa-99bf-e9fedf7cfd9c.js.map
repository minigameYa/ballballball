{"version":3,"sources":["../../../../assets/Script/assets/Script/Ball.ts"],"names":[],"mappings":";;;;;AAAA,uCAAwE;AAClE,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAAQ,CAAmB;AAG5C;IAAsC,4BAAY;IADlD;QAAA,qEAoHC;QAhHG,WAAK,GAAW,gBAAS,CAAC,MAAM,CAAA;QAChC,SAAG,GAAW,CAAC,CAAA;QACf,kBAAY,GAAW,CAAC,CAAA;QACxB,UAAI,GAAW,CAAC,CAAA;QAGhB,WAAK,GAAW,CAAC,CAAA;QACjB,UAAI,GAAQ,IAAI,CAAA;QAChB,QAAE,GAAW,CAAC,CAAA;QACd,QAAE,GAAW,CAAC,CAAA;QAGd,YAAM,GAAa,IAAI,CAAA;;IAoG3B,CAAC;IAnGG,wBAAwB;IAExB,yBAAM,GAAN;QACI,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAA;QAC9C,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAA;QAChD,IAAI,CAAC,aAAa,EAAE,CAAC;QACf,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAE,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,GAAG,EAAE,CAAA;QACnD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,SAAS,IAAI,oBAAa,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAA;QAC7E,oBAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,IAAI,GAAG,IAAI,CAAA;QAClC,oBAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAA;IAClD,CAAC;IAED,wBAAK,GAAL;IAEA,CAAC;IAED,gCAAa,GAAb;QACI,IAAI,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAA;QAChC,wCAAwC;QACxC,4BAA4B;QAC5B,IAAI;QACJ,qCAAqC;QACrC,4BAA4B;QAC5B,IAAI;QACJ,wCAAwC;QACxC,4BAA4B;QAC5B,IAAI;QAEJ,IAAM,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,IAAI,GAAG,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,kBAAkB,EAAE,CAAC,CAAA;QAChI,IAAM,QAAQ,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAE,IAAI,CAAC,IAAI,GAAG,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,iBAAiB,EAAE,CAAC,CAAA;QACnI,IAAM,UAAU,GAAG,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC,CAAA;QAClE,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,KAAK,IAAI,CAAC,IAAI,EAAE;YAC3B,IAAM,KAAK,GAAG,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;YACjG,IAAM,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC;gBACzB,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,aAAa,CAAC,EAAE,CAAC,QAAQ,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAA;YACxE,CAAC,EAAE,IAAI,CAAC,CAAA;YACR,IAAM,WAAW,GAAG,EAAE,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAA;YAChD,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAA;SACnC;aAAM;YACH,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,CAAC;SACnC;IAEL,CAAC;IAED,kCAAe,GAAf;QACI,IAAI,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAA;QACtC,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,IAAI,OAAO,IAAI,IAAI,CAAC,SAAS,KAAK,oBAAa,CAAC,KAAK,EAAE;YACrG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAA;YAC3C,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,KAAK,CAAA;YACxB,IAAI,CAAC,SAAS,GAAG,oBAAa,CAAC,IAAI,CAAA;YACnC,OAAO;SACV;QACD,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,KAAK,IAAI,CAAC,OAAO,IAAI,IAAI,CAAC,SAAS,KAAK,oBAAa,CAAC,IAAI,EAAE;YACrG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,CAAA;YAC5C,IAAI,CAAC,KAAK,GAAG,CAAC,IAAI,CAAC,KAAK,CAAA;YACxB,IAAI,CAAC,SAAS,GAAG,oBAAa,CAAC,KAAK,CAAA;YACpC,OAAO;SACV;QACD,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAA;IAC7B,CAAC;IAED,SAAS;IACT,iCAAc,GAAd;QACI,IAAM,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,EAAE,CAAA;QAC1C,IAAM,IAAI,GAAG,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAA;QACrD,OAAO,IAAI,CAAA;IACf,CAAC;IAED,QAAQ;IACR,0BAAO,GAAP;QACI,IAAI,IAAI,CAAC,cAAc,EAAE,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,GAAG,CAAC,EAAE;YACvE,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAA;YAC1B,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAA;YACnB,OAAO,oBAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;YAC7B,KAAK,CAAC,KAAK,CAAC,CAAA;SACf;IACL,CAAC;IAED,QAAQ;IACR,4BAAS,GAAT;QACI,IAAI,CAAC,GAAG,EAAE,CAAA;QACJ,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAE,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,GAAG,EAAE,CAAA;QACnD,IAAI,IAAI,CAAC,GAAG,IAAI,CAAC,EAAE;YACf,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAA;YACzB,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,CAAA;YACnB,OAAO,oBAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAA;YAC7B,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,oBAAa,CAAC,CAAC,MAAM,EAAE;gBACpC,KAAK,CAAC,MAAM,CAAC,CAAA;aAChB;SACJ;IACL,CAAC;IAED,yBAAM,GAAN,UAAO,EAAE;QACL,IAAI,CAAC,OAAO,EAAE,CAAA;QACd,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,GAAG,GAAG,EAAE,CAAA;QAClC,IAAI,CAAC,eAAe,EAAE,CAAA;QACtB,oBAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;QACtC,oBAAa,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IAC1C,CAAC;IA/GD;QADC,QAAQ;2CACuB;IAYhC;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;4CACI;IAfN,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAmH5B;IAAD,eAAC;CAnHD,AAmHC,CAnHqC,EAAE,CAAC,SAAS,GAmHjD;kBAnHoB,QAAQ","file":"","sourceRoot":"../../../../assets/Script","sourcesContent":["import { ballScale, ballDerection, ballPositions } from \"./modules/data\"\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class NewClass extends cc.Component {\n\n    @property\n    scale: number = ballScale.NORMAL\n    num: number = 0\n    jumpDuration: number = 1\n    maxY: number = 0\n    jumpAction: cc.Action\n    derection: number\n    speed: number = 1\n    game: any = null\n    id: number = 0\n    HP: number = 0\n\n    @property(cc.Label)\n    points: cc.Label = null\n    // LIFE-CYCLE CALLBACKS:\n\n    onLoad() {\n        this.node.width = this.node.width * this.scale\n        this.node.height = this.node.height * this.scale\n        this.setJumpAction();\n        (<any>this.node.children[0]).string = this.num + ''\n        this.speed = this.derection == ballDerection.Right ? this.speed : -this.speed\n        ballPositions[this.id].node = this\n        ballPositions[this.id].width = this.node.width\n    }\n\n    start() {\n\n    }\n\n    setJumpAction() {\n        let groundY = this.game.ground.y\n        // if (this.scale == ballScale.NORMAL) {\n        //     this.jumpDuration = 1\n        // }\n        // if (this.scale == ballScale.BIG) {\n        //     this.jumpDuration = 2\n        // }\n        // if (this.scale == ballScale.BIGBIG) {\n        //     this.jumpDuration = 3\n        // }\n\n        const jumpUp = cc.moveBy(this.jumpDuration, cc.p(0, this.maxY - groundY - this.node.height / 2)).easing(cc.easeCubicActionOut())\n        const jumpDown = cc.moveBy(this.jumpDuration, cc.p(0, - this.maxY + groundY + this.node.height / 2)).easing(cc.easeCubicActionIn())\n        const jumpAction = cc.repeatForever(cc.sequence(jumpDown, jumpUp))\n        if (this.node.y !== this.maxY) {\n            const trans = cc.moveBy(this.jumpDuration, cc.p(0, groundY + this.node.height / 2 - this.node.y))\n            const callback = cc.callFunc(function () {\n                this.node.runAction(cc.repeatForever(cc.sequence(jumpUp, jumpDown)))\n            }, this)\n            const transAction = cc.sequence(trans, callback)\n            this.node.runAction(transAction)\n        } else {\n            this.node.runAction(jumpAction);\n        }\n\n    }\n\n    ballCrossAction() {\n        let borderX = this.game.node.width / 2\n        if (this.node.x + this.node.width / 2 + this.speed >= borderX && this.derection === ballDerection.Right) {\n            this.node.x = borderX - this.node.width / 2\n            this.speed = -this.speed\n            this.derection = ballDerection.Left\n            return;\n        }\n        if (this.node.x - this.node.width / 2 + this.speed <= -borderX && this.derection === ballDerection.Left) {\n            this.node.x = -borderX + this.node.width / 2\n            this.speed = -this.speed\n            this.derection = ballDerection.Right\n            return;\n        }\n        this.node.x += this.speed\n    }\n    co\n    // 获取小车坐标\n    getCarPosition() {\n        const carPos = this.game.car.getPosition()\n        const dist = cc.pDistance(this.node.position, carPos)\n        return dist\n    }\n\n    // 触碰到小车\n    onCrash() {\n        if (this.getCarPosition() < this.node.width / 2 + this.game.car.width / 2) {\n            this.node.stopAllActions()\n            this.node.destroy()\n            delete ballPositions[this.id]\n            alert('你输了')\n        }\n    }\n\n    // 被子弹打到\n    onShooted() {\n        this.num--\n        (<any>this.node.children[0]).string = this.num + ''\n        if (this.num == 0) {\n            this.game.splitBall(this)\n            this.node.destroy()\n            delete ballPositions[this.id]\n            if (!Object.keys(ballPositions).length) {\n                alert('你赢了！')\n            }\n        }\n    }\n\n    update(dt) {\n        this.onCrash()\n        this.points.string = this.num + ''\n        this.ballCrossAction()\n        ballPositions[this.id].x = this.node.x\n        ballPositions[this.id].y = this.node.y\n    }\n}\n"]}