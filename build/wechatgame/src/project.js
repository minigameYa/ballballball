require=function s(a,c,l){function r(e,t){if(!c[e]){if(!a[e]){var o="function"==typeof require&&require;if(!t&&o)return o(e,!0);if(u)return u(e,!0);var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}var n=c[e]={exports:{}};a[e][0].call(n.exports,function(t){return r(a[e][1][t]||t)},n,n.exports,s,a,c,l)}return c[e].exports}for(var u="function"==typeof require&&require,t=0;t<l.length;t++)r(l[t]);return r}({Ball:[function(t,e,o){"use strict";cc._RF.push(e,"8c3196gYz9Lqpm/6f7ffP2c","Ball"),Object.defineProperty(o,"__esModule",{value:!0});var l=t("./modules/data"),i=cc._decorator,n=i.ccclass,s=i.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scale=l.ballScale.NORMAL,t.num=0,t.jumpDuration=1,t.maxY=0,t.speed=1,t.game=null,t.id=0,t.HP=0,t.done=!1,t.points=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.width=this.node.width*this.scale,this.node.height=this.node.height*this.scale,this.setJumpAction(),this.speed=this.derection==l.ballDerection.Right?this.speed:-this.speed,l.ballPositions[this.id].node=this,l.ballPositions[this.id].width=this.node.width,l.ballPositions[this.id].x=this.node.x,l.ballPositions[this.id].y=this.node.y,this.changeColor()},t.prototype.changeColor=function(){for(var t in l.ballColor)this.num>parseInt(t)&&(this.node.color=cc.color.apply(cc,l.ballColor[t]))},t.prototype.start=function(){},t.prototype.setJumpAction=function(){var t=this.game.ground.y;this.scale==l.ballScale.NORMAL&&(this.jumpDuration=1),this.scale==l.ballScale.BIG&&(this.jumpDuration=1.5),this.scale==l.ballScale.BIGBIG&&(this.jumpDuration=2);var e=cc.moveBy(this.jumpDuration,cc.p(0,this.maxY-t-this.node.height/2)).easing(cc.easeCubicActionOut()),o=cc.moveBy(this.jumpDuration,cc.p(0,-this.maxY+t+this.node.height/2)).easing(cc.easeCubicActionIn()),i=cc.repeatForever(cc.sequence(o,e));if(this.node.y!==this.maxY){var n=cc.moveBy(this.jumpDuration/2,cc.p(0,this.game.node.height/10)).easing(cc.easeCubicActionOut()),s=cc.moveBy(this.jumpDuration,cc.p(0,t+this.node.height/2-this.node.y-this.game.node.height/10)).easing(cc.easeCubicActionIn()),a=cc.callFunc(function(){this.node.runAction(cc.repeatForever(cc.sequence(e,o)))},this),c=cc.sequence(n,s,a);this.node.runAction(c)}else this.node.runAction(i)},t.prototype.ballCrossAction=function(){var t=this.game.node.width/2;return this.node.x+this.node.width/2+this.speed>=t&&this.derection===l.ballDerection.Right?(this.node.x=t-this.node.width/2,this.speed=-this.speed,void(this.derection=l.ballDerection.Left)):this.node.x-this.node.width/2+this.speed<=-t&&this.derection===l.ballDerection.Left?(this.node.x=-t+this.node.width/2,this.speed=-this.speed,void(this.derection=l.ballDerection.Right)):void(this.node.x+=this.speed)},t.prototype.getCarPosition=function(){var t=this.game.car.getPosition();return cc.pDistance(this.node.position,t)},t.prototype.onCrash=function(){this.getCarPosition()<this.node.width/2+this.game.car.width/2&&this.game.gameOver()},t.prototype.over=function(){this.done=!0,this.node.stopAllActions(),this.node.destroy(),delete l.ballPositions[this.id]},t.prototype.onShooted=function(){if(this.num--,this.points.string=this.num+"",0==this.num){this.game.splitBall(this),this.game.spawnCoins(this.node.x,this.node.y),this.node.destroy(),delete l.ballPositions[this.id];var t=!1;for(var e in l.ballPositions)l.ballPositions[e].node.scale!==l.ballScale.NORMAL&&(t=!0);t||this.game.spawnNewBall(),Object.keys(l.ballPositions).length||alert("你赢了！")}},t.prototype.update=function(t){this.done||(this.points.string=this.num+"",this.ballCrossAction(),l.ballPositions[this.id].x=this.node.x,l.ballPositions[this.id].y=this.node.y,this.onCrash())},__decorate([s],t.prototype,"scale",void 0),__decorate([s(cc.Label)],t.prototype,"points",void 0),t=__decorate([n],t)}(cc.Component);o.default=a,cc._RF.pop()},{"./modules/data":"data"}],Bullet:[function(t,e,o){"use strict";cc._RF.push(e,"cb4e3t7OhVP5JJgdo7jQBia","Bullet"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./modules/data"),n=cc._decorator,s=n.ccclass,a=n.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.game=null,t.speed=0,t.carY=0,t.bulletNext=!0,t.id=0,t.done=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.carY=this.game.car.y+this.game.car.height/2,this.resetTheBullet(),i.bulletPositions[this.id].node=this,i.bulletPositions[this.id].x=this.node.x,i.bulletPositions[this.id].y=this.node.y},t.prototype.resetTheBullet=function(){this.node.y=this.carY,this.speed=400,this.node.opacity=255,this.node.x=this.game.car.x,i.bulletPositions[this.id].fade=!1},t.prototype.onShooted=function(){this.node.opacity=0},t.prototype.over=function(){this.done=!0,this.node.stopAllActions(),this.node.destroy(),delete i.bulletPositions[this.id]},t.prototype.update=function(t){if(!this.done){if(this.bulletNext&&this.node.y>2*this.node.height+this.carY&&!this.game.stopSpawnBullet&&(this.game.initNewBullet(),this.bulletNext=!1),this.node.y>=this.game.node.height/2)return this.resetTheBullet(),void(this.game.stopSpawnBullet=!0);this.node.y+=this.speed*t,i.bulletPositions[this.id].x=this.node.x,i.bulletPositions[this.id].y=this.node.y}},__decorate([a],t.prototype,"game",void 0),t=__decorate([s],t)}(cc.Component);o.default=c,cc._RF.pop()},{"./modules/data":"data"}],Car:[function(t,e,o){"use strict";cc._RF.push(e,"6c929FljdZJOqFvizEm24tm","Car"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,s=i.property,c="idle",a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t.game=null,t.derection=c,t}return __extends(t,e),t.prototype.onLoad=function(){this.setInputControl()},t.prototype.start=function(){},t.prototype.update=function(t){},t.prototype.setInputControl=function(){var o=this,i=0,n=0,s=!1,a=0;this.node.on(cc.Node.EventType.TOUCH_START,function(t){s=!0,i=t.getLocationX(),n=o.node.x}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(s){var e=t.getLocationX()-i;o.wheelScroll(e-a),a=e,Math.abs(n+e)>o.game.node.width/2-o.node.width/2||(o.node.x=n+e)}}),this.node.on(cc.Node.EventType.TOUCH_END,function(t){this.derection=c})},t.prototype.wheelScroll=function(t){var e=t%(2*Math.PI*29)/(2*Math.PI*29)*360;this.node.children[1].rotation+=e,this.node.children[2].rotation+=e},__decorate([s(cc.Label)],t.prototype,"label",void 0),__decorate([s],t.prototype,"text",void 0),__decorate([s],t.prototype,"derection",void 0),t=__decorate([n],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],Coin:[function(t,e,o){"use strict";cc._RF.push(e,"c9740YlV4lOC4EVmhfN0jXZ","Coin"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,s=i.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timer=10,t.game=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.setJumpAction()},t.prototype.setJumpAction=function(){var t=this.game.ground.y,e=cc.moveBy(1,cc.p(0,-this.node.y+this.node.height/2+t)).easing(cc.easeBounceOut());this.node.runAction(e)},t.prototype.onPicked=function(){this.game.gainGold(),this.node.destroy()},t.prototype.getCarPosition=function(){var t=this.game.car.getPosition();return cc.pDistance(this.node.position,t)},t.prototype.update=function(t){this.timer-=t,this.timer<=3&&this.setOpacityDel(),this.timer<=0&&this.node.destroy(),this.getCarPosition()<this.node.width/2+this.game.car.width/2&&this.onPicked()},t.prototype.setOpacityDel=function(){this.node.opacity-=10,this.node.opacity<=100&&this.setOpacityAdd()},t.prototype.setOpacityAdd=function(){this.node.opacity+=10,244<=this.node.opacity&&this.setOpacityDel()},__decorate([s],t.prototype,"timer",void 0),t=__decorate([n],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"20cbc6FV9pJobJSNNf5s4U9","Game"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,s=i.property,d=t("./modules/data"),h=t("./modules/data"),p=t("./modules/util"),a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ballPrefab=null,t.bulletPrefab=null,t.coinPrefab=null,t.car=null,t.ground=null,t.score=null,t.gold=null,t.userName=null,t.result=null,t.balls=[],t.gameTime=0,t.carY=0,t.stopSpawnBullet=!1,t.stopSpawnBall=!1,t.idCount=0,t.p1=0,t.p2=.1,t.p3=.9,t.spawnCount=4,t.scoreNum=0,t.done=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.carY=this.car.y+this.car.height/2,(this.car.getComponent("Car").game=this).spawnNewBall(),this.initNewBullet(),this.userName.string=d.user.userInfo.nickName},t.prototype.start=function(){},t.prototype.spawnNewBall=function(){this.stopSpawnBall||this.initNewBall(),this.spawnCount=4},t.prototype.initNewBall=function(){var t,e,o=p.getRandom([h.ballScale.BIGBIG,h.ballScale.BIG,h.ballScale.NORMAL],[this.p1,this.p2,this.p3]),i=this.balls.length,n=cc.instantiate(this.ballPrefab),s=i<=2?0:this.balls[i-3].HP,a=d.user.bullet.power*d.user.bullet.speed*1.5,c=10+this.gameTime/120*a,l=Math.floor(cc.random0To1()*(c-s)+s)||1,r=.5<cc.random0To1()?h.ballDerection.Left:h.ballDerection.Right;this.balls.push({HP:l,derection:r}),o==h.ballScale.NORMAL&&(e=(this.node.height/2-this.carY)/3+this.carY-n.height*o/2),o==h.ballScale.BIG&&(e=(this.node.height/2-this.carY)/3*2+this.carY-n.height*o/2),o==h.ballScale.BIGBIG&&(e=this.node.height/2-this.carY+this.carY-n.height*o/2),t=r==h.ballDerection.Left?this.node.width/2:-this.node.width/2;var u=n.getComponent("Ball");u.num=u.HP=l,u.scale=o,u.maxY=e,u.game=this,u.derection=r,u.id=this.idCount,u.points.string=l+"",h.ballPositions[this.idCount]={x:0,y:0,width:0,node:null},this.idCount++,n.setPosition(cc.p(t,e)),this.node.addChild(n),this.p3=p.getPositive(this.p3-this.gameTime%20*.15),0==this.p3?(this.p1=p.getPositive(this.gameTime%10*.1),this.p2=p.getPositive(this.p2-this.gameTime/20*.15)):(this.p1=p.getPositive(this.p3+this.gameTime%20*.05),this.p2=p.getPositive(this.p2+this.gameTime%20))},t.prototype.splitBall=function(t){if(t.scale!==h.ballScale.NORMAL){var e=t.scale===h.ballScale.BIG?h.ballScale.NORMAL:h.ballScale.BIG;this.initSplitBall({HP:Math.ceil(.35*t.HP),derection:h.ballDerection.Left,x:t.node.x,y:t.node.y,scale:e}),this.initSplitBall({HP:Math.ceil(.65*t.HP),derection:h.ballDerection.Right,x:t.node.x,y:t.node.y,scale:e})}},t.prototype.initSplitBall=function(t){var e,o=t.HP,i=t.derection,n=t.x,s=t.scale,a=t.y,c=cc.instantiate(this.ballPrefab);e=s==h.ballScale.NORMAL?(this.node.height/2-this.carY)/3+this.carY-c.height*s/2:(this.node.height/2-this.carY)/3*2+this.carY-c.height*s/2;var l=c.getComponent("Ball");l.num=l.HP=o,l.scale=s,l.maxY=e,l.game=this,l.derection=i,l.id=this.idCount,h.ballPositions[this.idCount]={x:0,y:0,width:0,node:null},this.idCount++,c.setPosition(cc.p(n,a)),this.node.addChild(c)},t.prototype.initNewBullet=function(){var t=cc.instantiate(this.bulletPrefab),e=t.getComponent("Bullet");e.game=this,e.id=this.idCount,h.bulletPositions[this.idCount]={x:0,y:0,node:null,fade:!1},this.idCount++,this.node.addChild(t)},t.prototype.onShoot=function(){for(var t in h.bulletPositions){var e=h.bulletPositions[t];if(e.node&&!e.fade){var o=cc.p(e.x,e.y);for(var i in h.ballPositions){var n=h.ballPositions[i];if(n.node){var s=cc.p(n.x,n.y);cc.pDistance(o,s)<n.width/2&&(n.node.onShooted(),e.node.onShooted(),this.scoreNum++,this.score.string=this.scoreNum+"",e.fade=!0)}}}}},t.prototype.spawnCoins=function(t,e){var o=cc.instantiate(this.coinPrefab);o.getComponent("Coin").game=this,o.x=t,o.y=e,this.node.addChild(o)},t.prototype.gainGold=function(){this.gold.string=parseInt(this.gold.string)+1+""},t.prototype.update=function(t){this.done||(this.gameTime+=t,this.onShoot(),this.spawnCount-=t,this.spawnCount<=0&&this.spawnNewBall())},t.prototype.singleGameDone=function(){for(var t in h.bulletPositions){h.bulletPositions[t].node.over()}for(var t in h.ballPositions){h.ballPositions[t].node.over()}this.stopSpawnBullet=!0,this.stopSpawnBall=!0},t.prototype.gameOver=function(){this.singleGameDone(),this.done=!0,this.result.active=!0},t.prototype.gameStart=function(){this.done=!1,this.result.active=!1,this.stopSpawnBullet=!1,this.stopSpawnBall=!1,this.initNewBullet(),this.spawnNewBall()},__decorate([s(cc.Prefab)],t.prototype,"ballPrefab",void 0),__decorate([s(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([s(cc.Prefab)],t.prototype,"coinPrefab",void 0),__decorate([s(cc.Node)],t.prototype,"car",void 0),__decorate([s(cc.Node)],t.prototype,"ground",void 0),__decorate([s(cc.Label)],t.prototype,"score",void 0),__decorate([s(cc.Label)],t.prototype,"gold",void 0),__decorate([s(cc.Label)],t.prototype,"userName",void 0),__decorate([s(cc.Node)],t.prototype,"result",void 0),__decorate([s],t.prototype,"balls",void 0),t=__decorate([n],t)}(cc.Component);o.default=a,cc._RF.pop()},{"./modules/data":"data","./modules/util":"util"}],Result:[function(t,e,o){"use strict";cc._RF.push(e,"db143u95qlCzZ43EN+FrIos","Result"),Object.defineProperty(o,"__esModule",{value:!0});var i=cc._decorator,n=i.ccclass,s=i.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nickName=null,t.score=null,t.resetBtn=null,t.game=null,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this;this.resetBtn.on(cc.Node.EventType.TOUCH_START,function(t){e.game.getComponent("Game").gameStart()})},t.prototype.start=function(){},__decorate([s(cc.Label)],t.prototype,"nickName",void 0),__decorate([s(cc.Label)],t.prototype,"score",void 0),__decorate([s(cc.Node)],t.prototype,"resetBtn",void 0),__decorate([s(cc.Node)],t.prototype,"game",void 0),t=__decorate([n],t)}(cc.Component);o.default=a,cc._RF.pop()},{}],Start:[function(t,e,o){"use strict";cc._RF.push(e,"b07f91FtCRHIpzeelKpWt6S","Start"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./modules/fetch"),n=t("./modules/data"),s=cc._decorator,a=s.ccclass,c=s.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nickName=null,t.startBtn=null,t.text="hello",t}return __extends(t,e),t.prototype.onLoad=function(){var t=this;i.handleLogin(function(){console.log(n.user),console.log(n.user.userInfo),t.nickName.string=n.user.userInfo.nickName}),this.startBtn.on(cc.Node.EventType.TOUCH_START,function(t){cc.director.loadScene("game")})},t.prototype.start=function(){},__decorate([c(cc.Label)],t.prototype,"nickName",void 0),__decorate([c(cc.Node)],t.prototype,"startBtn",void 0),__decorate([c],t.prototype,"text",void 0),t=__decorate([a],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./modules/data":"data","./modules/fetch":"fetch"}],config:[function(t,e,o){"use strict";cc._RF.push(e,"c7912WBmehAdrdbkrXyJIam","config"),Object.defineProperty(o,"__esModule",{value:!0});var i="https://kglf0nbi.qcloud.la",n={service:{host:i,loginUrl:i+"/weapp/login",requestUrl:i+"/weapp/user",tunnelUrl:i+"/weapp/tunnel",uploadUrl:i+"/weapp/upload"}};o.default=n,cc._RF.pop()},{}],constants:[function(t,e,o){"use strict";cc._RF.push(e,"2ea6c/tgXlNabIeFvzcta8K","constants"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={WX_HEADER_CODE:"X-WX-Code",WX_HEADER_ENCRYPTED_DATA:"X-WX-Encrypted-Data",WX_HEADER_IV:"X-WX-IV",WX_HEADER_ID:"X-WX-Id",WX_HEADER_SKEY:"X-WX-Skey",WX_SESSION_MAGIC_ID:"F2C224D4-2BCE-4C64-AF9F-A6D872000D1A",ERR_INVALID_PARAMS:"ERR_INVALID_PARAMS",ERR_WX_LOGIN_FAILED:"ERR_WX_LOGIN_FAILED",ERR_WX_GET_USER_INFO:"ERR_WX_GET_USER_INFO",ERR_LOGIN_TIMEOUT:"ERR_LOGIN_TIMEOUT",ERR_LOGIN_FAILED:"ERR_LOGIN_FAILED",ERR_LOGIN_SESSION_NOT_RECEIVED:"ERR_LOGIN_MISSING_SESSION",ERR_SESSION_INVALID:"ERR_SESSION_INVALID",ERR_CHECK_LOGIN_FAILED:"ERR_CHECK_LOGIN_FAILED"},cc._RF.pop()},{}],data:[function(t,e,o){"use strict";var i;cc._RF.push(e,"ee3d0dUDjBNaaL8UeLV7wLs","data"),Object.defineProperty(o,"__esModule",{value:!0}),o.bulletArray=[{speed:10,power:10},{speed:20,power:20}],o.user={bullet:{speed:5,power:5},level:0,isLogin:!1,userInfo:{}},o.updateUserData=function(t){},o.ballScale={BIGBIG:2,BIG:1.5,NORMAL:1},(i=o.ballDerection||(o.ballDerection={}))[i.Left=0]="Left",i[i.Right=1]="Right",o.ballIndexs={},o.ballPositions={},o.bulletIndexs={},o.bulletPositions={},o.ballColor={1:[255,255,255],10:[167,255,9],20:[35,255,8]},o.rankList=[],cc._RF.pop()},{}],fetch:[function(t,e,o){"use strict";cc._RF.push(e,"fe229b7LLxEbL9nokO7D2wA","fetch"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("../config"),n=t("./data"),s=t("../libs/wafer2-client-sdk"),a=t("./util");s.default.setLoginUrl(i.default.service.loginUrl),o.handleLogin=function(e){console.log(s.default),n.user.isLogin||(a.showBusy("正在登录"),s.default.login({success:function(t){console.log(t),t?(a.showSuccess("登录成功"),n.user.isLogin=!0,n.user.userInfo=t.data.data,e&&e()):s.default.request({url:i.default.service.requestUrl,login:!0,success:function(t){a.showSuccess("登录成功"),n.user.isLogin=!0,n.user.userInfo=t.data.data,e&&e()},fail:function(t){a.showModel("请求失败",t),console.log("request fail",t)}})},fail:function(t){a.showModel("登录失败",t),console.log("登录失败",t)}}))},cc._RF.pop()},{"../config":"config","../libs/wafer2-client-sdk":"index","./data":"data","./util":"util"}],index:[function(t,e,o){"use strict";cc._RF.push(e,"43d56JvVp5HXqFvduprI4/k","index"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./lib/constants"),n=t("./lib/login"),s=t("./lib/session"),a=t("./lib/request"),c={login:n.default.login,setLoginUrl:n.default.setLoginUrl,LoginError:n.default.LoginError,clearSession:s.default.clear,request:a.default.request,RequestError:a.default.RequestError};o.default=c,Object.keys(i.default).forEach(function(t){0===t.indexOf("ERR_")&&(c[t]=i.default[t])}),cc._RF.pop()},{"./lib/constants":"constants","./lib/login":"login","./lib/request":"request","./lib/session":"session"}],login:[function(t,e,o){"use strict";cc._RF.push(e,"3f8e7qNq4JIOrjdEpQAAt+U","login"),Object.defineProperty(o,"__esModule",{value:!0});var i=t("./utils"),l=t("./constants"),r=t("./session"),u=function(){function t(t,e){Error.call(this,e),this.type=t,this.message=e}return(t.prototype=new Error).constructor=t}(),n=function(){},s={method:"GET",success:n,fail:n,loginUrl:null};o.default={LoginError:u,login:function(c){if(c=i.default.extend({},s,c),s.loginUrl){var t=function(){return o=function(t,e){if(t)c.fail(t);else{var s=e.userInfo,o=e.code,i=e.encryptedData,n=e.iv,a={};a[l.default.WX_HEADER_CODE]=o,a[l.default.WX_HEADER_ENCRYPTED_DATA]=i,a[l.default.WX_HEADER_IV]=n,wx.request({url:c.loginUrl,header:a,method:c.method,data:c.data,success:function(t){var e=t.data;if(e&&0===e.code&&e.data.skey){var o=e.data;if(o.userinfo)r.default.set(o.skey),c.success(s);else{var i="登录失败("+e.error+")："+(e.message||"未知错误"),n=new u(l.default.ERR_LOGIN_SESSION_NOT_RECEIVED,i);c.fail(n)}}else n=new u(l.default.ERR_LOGIN_SESSION_NOT_RECEIVED,JSON.stringify(e)),c.fail(n)},fail:function(t){var e=new u(l.default.ERR_LOGIN_FAILED,"登录失败，可能是网络错误或者服务器发生异常");c.fail(e)}})}},void wx.login({success:function(e){wx.getUserInfo({success:function(t){o(null,{code:e.code,encryptedData:t.encryptedData,iv:t.iv,userInfo:t.userInfo})},fail:function(t){var e=new u(l.default.ERR_WX_GET_USER_INFO,"获取微信用户信息失败，请检查网络状态");e.detail=t,o(e,null)}})},fail:function(t){var e=new u(l.default.ERR_WX_LOGIN_FAILED,"微信登录失败，请检查网络状态");e.detail=t,o(e,null)}});var o},e=r.default.get();e?wx.checkSession({success:function(){c.success(e.userInfo)},fail:function(){r.default.clear(),t()}}):t()}else c.fail(new u(l.default.ERR_INVALID_PARAMS,"登录错误：缺少登录地址，请通过 setLoginUrl() 方法设置登录地址"))},setLoginUrl:function(t){s.loginUrl=t}},cc._RF.pop()},{"./constants":"constants","./session":"session","./utils":"utils"}],request:[function(t,e,o){"use strict";cc._RF.push(e,"b045dqtXUFJtL5YfXRqXQKI","request"),Object.defineProperty(o,"__esModule",{value:!0});var h=t("./constants"),p=t("./utils"),f=t("./session"),_=t("./login"),g=function(){},y=function(){function t(t,e){Error.call(this,e),this.type=t,this.message=e}return(t.prototype=new Error).constructor=t}();o.default={RequestError:y,request:function(i){if("object"!=typeof i){var t="请求传参应为 object 类型，但实际传了 "+typeof i+" 类型";throw new y(h.default.ERR_INVALID_PARAMS,t)}var e=i.login,o=i.success||g,n=i.fail||g,s=i.complete||g,a=i.header||{},c=function(){o.apply(null,arguments),s.apply(null,arguments)},l=function(t){n.call(null,t),s.call(null,t)},r=!1;function u(){_.default.login({success:d,fail:l})}function d(){var t,e,o=(t=f.default.get(),e={},t&&(e[h.default.WX_HEADER_SKEY]=t),e);wx.request(p.default.extend({},i,{header:p.default.extend({},a,o),success:function(t){var e,o=t.data;if(o&&-1===o.code)return f.default.clear(),r?(e=new y(o.error,"登录态已过期"),void l(e)):(r=!0,void u());c.apply(null,arguments)},fail:l,complete:g}))}e?u():d()}},cc._RF.pop()},{"./constants":"constants","./login":"login","./session":"session","./utils":"utils"}],session:[function(t,e,o){"use strict";cc._RF.push(e,"ec07eIZ6+9DJLeliMj1kj7l","session"),Object.defineProperty(o,"__esModule",{value:!0});var i="weapp_session_"+t("./constants").default.WX_SESSION_MAGIC_ID,n={get:function(){return wx.getStorageSync(i)||null},set:function(t){wx.setStorageSync(i,t)},clear:function(){wx.removeStorageSync(i)}};o.default=n,cc._RF.pop()},{"./constants":"constants"}],symbol:[function(t,e,o){"use strict";cc._RF.push(e,"829612aw0xAm71HPTWWnita","symbol");var i=window.Symbol,n=0;i||((i=function(t){return"__"+t+"_"+Math.floor(1e9*Math.random())+"_"+ ++n+"__"}).iterator=i("Symbol.iterator")),window.Symbol=i,cc._RF.pop()},{}],utils:[function(t,e,o){"use strict";cc._RF.push(e,"2520ewRYxpA/ZMgqNDX7Lod","utils"),Object.defineProperty(o,"__esModule",{value:!0}),o.default={extend:function(t){for(var e=[],o=1;o<arguments.length;o++)e[o-1]=arguments[o];for(var i=e,n=0;n<i.length;n+=1){var s=i[n];for(var a in s)s.hasOwnProperty(a)&&(t[a]=s[a])}return t}},cc._RF.pop()},{}],util:[function(t,e,o){"use strict";cc._RF.push(e,"0834esOZg1KnaLNH2odS6qX","util"),Object.defineProperty(o,"__esModule",{value:!0}),o.getPositive=function(t){return 0<=t?t:0},o.getRandom=function(t,e){for(var o=0,i=0,n=Math.random(),s=e.length-1;0<=s;s--)o+=e[s];for(n*=o,s=e.length-1;0<=s;s--)if(i+=e[s],0!=e[s]&&n<=i)return t[s];return null},o.formatTime=function(t){var e=t.getFullYear(),o=t.getMonth()+1,i=t.getDate(),n=t.getHours(),s=t.getMinutes(),a=t.getSeconds();return[e,o,i].map(c).join("/")+" "+[n,s,a].map(c).join(":")};var c=function(t){return(t=t.toString())[1]?t:"0"+t};o.showBusy=function(t){return wx.showToast({title:t,icon:"loading",duration:1e4})},o.showSuccess=function(t){return wx.showToast({title:t,icon:"success"})},o.showModel=function(t,e){wx.hideToast(),wx.showModal({title:t,content:JSON.stringify(e),showCancel:!1})},cc._RF.pop()},{}]},{},["Ball","Bullet","Car","Coin","Game","Result","Start","config","symbol","index","constants","login","request","session","utils","data","fetch","util"]);