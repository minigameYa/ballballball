require=function s(a,l,c){function r(e,t){if(!l[e]){if(!a[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(h)return h(e,!0);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}var n=l[e]={exports:{}};a[e][0].call(n.exports,function(t){return r(a[e][1][t]||t)},n,n.exports,s,a,l,c)}return l[e].exports}for(var h="function"==typeof require&&require,t=0;t<c.length;t++)r(c[t]);return r}({Ball:[function(t,e,i){"use strict";cc._RF.push(e,"8c3196gYz9Lqpm/6f7ffP2c","Ball"),Object.defineProperty(i,"__esModule",{value:!0});var c=t("./modules/data"),o=cc._decorator,n=o.ccclass,s=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scale=c.ballScale.NORMAL,t.num=0,t.jumpDuration=1,t.maxY=0,t.speed=1,t.game=null,t.id=0,t.HP=0,t.done=!1,t.points=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.width=this.node.width*this.scale,this.node.height=this.node.height*this.scale,this.setJumpAction(),this.speed=this.derection==c.ballDerection.Right?this.speed:-this.speed,c.ballPositions[this.id].node=this,c.ballPositions[this.id].width=this.node.width,c.ballPositions[this.id].x=this.node.x,c.ballPositions[this.id].y=this.node.y,this.changeColor()},t.prototype.changeColor=function(){for(var t in c.ballColor)this.num>parseInt(t)&&(this.node.color=cc.color.apply(cc,c.ballColor[t]))},t.prototype.start=function(){},t.prototype.setJumpAction=function(){var t=this.game.ground.y;this.scale==c.ballScale.NORMAL&&(this.jumpDuration=1),this.scale==c.ballScale.BIG&&(this.jumpDuration=1.5),this.scale==c.ballScale.BIGBIG&&(this.jumpDuration=2);var e=cc.moveBy(this.jumpDuration,cc.p(0,this.maxY-t-this.node.height/2)).easing(cc.easeCubicActionOut()),i=cc.moveBy(this.jumpDuration,cc.p(0,-this.maxY+t+this.node.height/2)).easing(cc.easeCubicActionIn()),o=cc.repeatForever(cc.sequence(i,e));if(this.node.y!==this.maxY){var n=cc.moveBy(this.jumpDuration/2,cc.p(0,this.game.node.height/10)).easing(cc.easeCubicActionOut()),s=cc.moveBy(this.jumpDuration,cc.p(0,t+this.node.height/2-this.node.y-this.game.node.height/10)).easing(cc.easeCubicActionIn()),a=cc.callFunc(function(){this.node.runAction(cc.repeatForever(cc.sequence(e,i)))},this),l=cc.sequence(n,s,a);this.node.runAction(l)}else this.node.runAction(o)},t.prototype.ballCrossAction=function(){var t=this.game.node.width/2;return this.node.x+this.node.width/2+this.speed>=t&&this.derection===c.ballDerection.Right?(this.node.x=t-this.node.width/2,this.speed=-this.speed,void(this.derection=c.ballDerection.Left)):this.node.x-this.node.width/2+this.speed<=-t&&this.derection===c.ballDerection.Left?(this.node.x=-t+this.node.width/2,this.speed=-this.speed,void(this.derection=c.ballDerection.Right)):void(this.node.x+=this.speed)},t.prototype.getCarPosition=function(){var t=this.game.car.getPosition();return cc.pDistance(this.node.position,t)},t.prototype.onCrash=function(){this.getCarPosition()<this.node.width/2+this.game.car.width/2&&this.game.gameOver()},t.prototype.over=function(){this.done=!0,this.node.stopAllActions(),this.node.destroy(),delete c.ballPositions[this.id]},t.prototype.onShooted=function(){if(this.num--,this.points.string=this.num+"",0==this.num){this.game.splitBall(this),this.game.spawnCoins(this.node.x,this.node.y),this.node.destroy(),delete c.ballPositions[this.id];var t=!1;for(var e in c.ballPositions)c.ballPositions[e].node.scale!==c.ballScale.NORMAL&&(t=!0);t||this.game.spawnNewBall(),Object.keys(c.ballPositions).length||alert("你赢了！")}},t.prototype.update=function(t){this.done||(this.points.string=this.num+"",this.ballCrossAction(),c.ballPositions[this.id].x=this.node.x,c.ballPositions[this.id].y=this.node.y,this.onCrash())},__decorate([s],t.prototype,"scale",void 0),__decorate([s(cc.Label)],t.prototype,"points",void 0),t=__decorate([n],t)}(cc.Component);i.default=a,cc._RF.pop()},{"./modules/data":"data"}],Bullet:[function(t,e,i){"use strict";cc._RF.push(e,"cb4e3t7OhVP5JJgdo7jQBia","Bullet"),Object.defineProperty(i,"__esModule",{value:!0});var o=t("./modules/data"),n=cc._decorator,s=n.ccclass,a=n.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.game=null,t.speed=0,t.carY=0,t.bulletNext=!0,t.id=0,t.done=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.carY=this.game.car.y+this.game.car.height/2,this.resetTheBullet(),o.bulletPositions[this.id].node=this,o.bulletPositions[this.id].x=this.node.x,o.bulletPositions[this.id].y=this.node.y},t.prototype.resetTheBullet=function(){this.node.y=this.carY,this.speed=400,this.node.opacity=255,this.node.x=this.game.car.x,o.bulletPositions[this.id].fade=!1},t.prototype.onShooted=function(){this.node.opacity=0},t.prototype.over=function(){this.done=!0,this.node.stopAllActions(),this.node.destroy(),delete o.bulletPositions[this.id]},t.prototype.update=function(t){if(!this.done){if(this.bulletNext&&this.node.y>2*this.node.height+this.carY&&!this.game.stopSpawnBullet&&(this.game.initNewBullet(),this.bulletNext=!1),this.node.y>=this.game.node.height/2)return this.resetTheBullet(),void(this.game.stopSpawnBullet=!0);this.node.y+=this.speed*t,o.bulletPositions[this.id].x=this.node.x,o.bulletPositions[this.id].y=this.node.y}},__decorate([a],t.prototype,"game",void 0),t=__decorate([s],t)}(cc.Component);i.default=l,cc._RF.pop()},{"./modules/data":"data"}],Car:[function(t,e,i){"use strict";cc._RF.push(e,"6c929FljdZJOqFvizEm24tm","Car"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,n=o.ccclass,s=o.property,l="idle",a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t.game=null,t.derection=l,t}return __extends(t,e),t.prototype.onLoad=function(){this.setInputControl()},t.prototype.start=function(){},t.prototype.update=function(t){},t.prototype.setInputControl=function(){var i=this,o=0,n=0,s=!1,a=0;this.node.on(cc.Node.EventType.TOUCH_START,function(t){s=!0,o=t.getLocationX(),n=i.node.x}),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){if(s){var e=t.getLocationX()-o;i.wheelScroll(e-a),a=e,Math.abs(n+e)>i.game.node.width/2-i.node.width/2||(i.node.x=n+e)}}),this.node.on(cc.Node.EventType.TOUCH_END,function(t){this.derection=l})},t.prototype.wheelScroll=function(t){var e=t%(2*Math.PI*29)/(2*Math.PI*29)*360;this.node.children[1].rotation+=e,this.node.children[2].rotation+=e},__decorate([s(cc.Label)],t.prototype,"label",void 0),__decorate([s],t.prototype,"text",void 0),__decorate([s],t.prototype,"derection",void 0),t=__decorate([n],t)}(cc.Component);i.default=a,cc._RF.pop()},{}],Coin:[function(t,e,i){"use strict";cc._RF.push(e,"c9740YlV4lOC4EVmhfN0jXZ","Coin"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,n=o.ccclass,s=o.property,a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timer=10,t.game=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.setJumpAction()},t.prototype.setJumpAction=function(){var t=this.game.ground.y,e=cc.moveBy(1,cc.p(0,-this.node.y+this.node.height/2+t)).easing(cc.easeBounceOut());this.node.runAction(e)},t.prototype.onPicked=function(){this.game.gainGold(),this.node.destroy()},t.prototype.getCarPosition=function(){var t=this.game.car.getPosition();return cc.pDistance(this.node.position,t)},t.prototype.update=function(t){this.timer-=t,this.timer<=3&&this.setOpacityDel(),this.timer<=0&&this.node.destroy(),this.getCarPosition()<this.node.width/2+this.game.car.width/2&&this.onPicked()},t.prototype.setOpacityDel=function(){this.node.opacity-=10,this.node.opacity<=100&&this.setOpacityAdd()},t.prototype.setOpacityAdd=function(){this.node.opacity+=10,244<=this.node.opacity&&this.setOpacityDel()},__decorate([s],t.prototype,"timer",void 0),t=__decorate([n],t)}(cc.Component);i.default=a,cc._RF.pop()},{}],Game:[function(t,e,i){"use strict";cc._RF.push(e,"20cbc6FV9pJobJSNNf5s4U9","Game"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,n=o.ccclass,s=o.property,d=t("./modules/data"),p=t("./modules/data"),u=t("./modules/util"),a=t("./modules/fetch"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ballPrefab=null,t.bulletPrefab=null,t.coinPrefab=null,t.car=null,t.ground=null,t.score=null,t.gold=null,t.balls=[],t.gameTime=0,t.carY=0,t.stopSpawnBullet=!1,t.stopSpawnBall=!1,t.idCount=0,t.p1=0,t.p2=.1,t.p3=.9,t.spawnCount=4,t.scoreNum=0,t.done=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.carY=this.car.y+this.car.height/2,(this.car.getComponent("Car").game=this).spawnNewBall(),this.initNewBullet(),a.login()},t.prototype.start=function(){},t.prototype.spawnNewBall=function(){this.stopSpawnBall||this.initNewBall(),this.spawnCount=4},t.prototype.initNewBall=function(){var t,e,i=u.getRandom([p.ballScale.BIGBIG,p.ballScale.BIG,p.ballScale.NORMAL],[this.p1,this.p2,this.p3]),o=this.balls.length,n=cc.instantiate(this.ballPrefab),s=o<=2?0:this.balls[o-3].HP,a=d.user.bullet.power*d.user.bullet.speed*1.5,l=10+this.gameTime/120*a,c=Math.floor(cc.random0To1()*(l-s)+s)||1,r=.5<cc.random0To1()?p.ballDerection.Left:p.ballDerection.Right;this.balls.push({HP:c,derection:r}),i==p.ballScale.NORMAL&&(e=(this.node.height/2-this.carY)/3+this.carY-n.height*i/2),i==p.ballScale.BIG&&(e=(this.node.height/2-this.carY)/3*2+this.carY-n.height*i/2),i==p.ballScale.BIGBIG&&(e=this.node.height/2-this.carY+this.carY-n.height*i/2),t=r==p.ballDerection.Left?this.node.width/2:-this.node.width/2;var h=n.getComponent("Ball");h.num=h.HP=c,h.scale=i,h.maxY=e,h.game=this,h.derection=r,h.id=this.idCount,h.points.string=c+"",p.ballPositions[this.idCount]={x:0,y:0,width:0,node:null},this.idCount++,n.setPosition(cc.p(t,e)),this.node.addChild(n),this.p3=u.getPositive(this.p3-this.gameTime%20*.15),0==this.p3?(this.p1=u.getPositive(this.gameTime%10*.1),this.p2=u.getPositive(this.p2-this.gameTime/20*.15)):(this.p1=u.getPositive(this.p3+this.gameTime%20*.05),this.p2=u.getPositive(this.p2+this.gameTime%20))},t.prototype.splitBall=function(t){if(t.scale!==p.ballScale.NORMAL){var e=t.scale===p.ballScale.BIG?p.ballScale.NORMAL:p.ballScale.BIG;this.initSplitBall({HP:Math.ceil(.35*t.HP),derection:p.ballDerection.Left,x:t.node.x,y:t.node.y,scale:e}),this.initSplitBall({HP:Math.ceil(.65*t.HP),derection:p.ballDerection.Right,x:t.node.x,y:t.node.y,scale:e})}},t.prototype.initSplitBall=function(t){var e,i=t.HP,o=t.derection,n=t.x,s=t.scale,a=t.y,l=cc.instantiate(this.ballPrefab);e=s==p.ballScale.NORMAL?(this.node.height/2-this.carY)/3+this.carY-l.height*s/2:(this.node.height/2-this.carY)/3*2+this.carY-l.height*s/2;var c=l.getComponent("Ball");c.num=c.HP=i,c.scale=s,c.maxY=e,c.game=this,c.derection=o,c.id=this.idCount,p.ballPositions[this.idCount]={x:0,y:0,width:0,node:null},this.idCount++,l.setPosition(cc.p(n,a)),this.node.addChild(l)},t.prototype.initNewBullet=function(){var t=cc.instantiate(this.bulletPrefab),e=t.getComponent("Bullet");e.game=this,e.id=this.idCount,p.bulletPositions[this.idCount]={x:0,y:0,node:null,fade:!1},this.idCount++,this.node.addChild(t)},t.prototype.onShoot=function(){for(var t in p.bulletPositions){var e=p.bulletPositions[t];if(e.node&&!e.fade){var i=cc.p(e.x,e.y);for(var o in p.ballPositions){var n=p.ballPositions[o];if(n.node){var s=cc.p(n.x,n.y);cc.pDistance(i,s)<n.width/2&&(n.node.onShooted(),e.node.onShooted(),this.scoreNum++,this.score.string=this.scoreNum+"",e.fade=!0)}}}}},t.prototype.spawnCoins=function(t,e){var i=cc.instantiate(this.coinPrefab);i.getComponent("Coin").game=this,i.x=t,i.y=e,this.node.addChild(i)},t.prototype.gainGold=function(){this.gold.string=parseInt(this.gold.string)+1+""},t.prototype.update=function(t){this.done||(this.gameTime+=t,this.onShoot(),this.spawnCount-=t,this.spawnCount<=0&&this.spawnNewBall())},t.prototype.singleGameDone=function(){for(var t in p.bulletPositions){p.bulletPositions[t].node.over()}for(var t in p.ballPositions){p.ballPositions[t].node.over()}this.stopSpawnBullet=!0,this.stopSpawnBall=!0},t.prototype.gameOver=function(){this.singleGameDone(),this.done=!0,alert("你输了！！！！！")},__decorate([s(cc.Prefab)],t.prototype,"ballPrefab",void 0),__decorate([s(cc.Prefab)],t.prototype,"bulletPrefab",void 0),__decorate([s(cc.Prefab)],t.prototype,"coinPrefab",void 0),__decorate([s(cc.Node)],t.prototype,"car",void 0),__decorate([s(cc.Node)],t.prototype,"ground",void 0),__decorate([s(cc.Label)],t.prototype,"score",void 0),__decorate([s(cc.Label)],t.prototype,"gold",void 0),__decorate([s],t.prototype,"balls",void 0),t=__decorate([n],t)}(cc.Component);i.default=l,cc._RF.pop()},{"./modules/data":"data","./modules/fetch":"fetch","./modules/util":"util"}],data:[function(t,e,i){"use strict";var o;cc._RF.push(e,"ee3d0dUDjBNaaL8UeLV7wLs","data"),Object.defineProperty(i,"__esModule",{value:!0}),i.bulletArray=[{speed:10,power:10},{speed:20,power:20}],i.user={bullet:{speed:5,power:5},level:0},i.updateUserData=function(t){},i.ballScale={BIGBIG:2,BIG:1.5,NORMAL:1},(o=i.ballDerection||(i.ballDerection={}))[o.Left=0]="Left",o[o.Right=1]="Right",i.ballIndexs={},i.ballPositions={},i.bulletIndexs={},i.bulletPositions={},i.ballColor={1:[255,255,255],10:[167,255,9],20:[35,255,8]},cc._RF.pop()},{}],fetch:[function(t,e,i){"use strict";cc._RF.push(e,"fe229b7LLxEbL9nokO7D2wA","fetch"),Object.defineProperty(i,"__esModule",{value:!0});i.login=function(){wx.request({url:"https://kglf0nbi.qcloud.la/login",success:function(t){console.log(t)}})},cc._RF.pop()},{}],util:[function(t,e,i){"use strict";cc._RF.push(e,"0834esOZg1KnaLNH2odS6qX","util"),Object.defineProperty(i,"__esModule",{value:!0}),i.getPositive=function(t){return 0<=t?t:0},i.getRandom=function(t,e){for(var i=0,o=0,n=Math.random(),s=e.length-1;0<=s;s--)i+=e[s];for(n*=i,s=e.length-1;0<=s;s--)if(o+=e[s],0!=e[s]&&n<=o)return t[s];return null},cc._RF.pop()},{}]},{},["Ball","Bullet","Car","Coin","Game","data","fetch","util"]);